
bin_PROGRAMS += bin/eolian_mono/eolian_mono

bin_eolian_mono_eolian_mono_SOURCES = \
	bin/eolian_mono/eolian_mono.cc
bin_eolian_mono_eolian_mono_CXXFLAGS = -I$(top_builddir)/src/lib/efl \
-I$(top_srcdir)/src/lib/eolian_cxx/ \
-I$(top_srcdir)/src/bin/eolian_mono/ \
@CHECK_CFLAGS@ @EINA_CFLAGS@ @EINA_CXX_CFLAGS@ @EO_CXX_CFLAGS@ @ECORE_CXX_CFLAGS@ @EO_CFLAGS@ \
-I$(top_srcdir)/src/bindings/cxx/eina_cxx \
@EOLIAN_CXX_CFLAGS@ @EOLIAN_CFLAGS@

bin_eolian_mono_eolian_mono_LDADD = @CHECK_LIBS@ @USE_EOLIAN_LIBS@

bin_eolian_mono_eolian_mono_DEPENDENCIES = @USE_EOLIAN_INTERNAL_LIBS@

evas_eolian_blacklisted_files = \
lib/evas/canvas/efl_canvas_text_cursor.eo.cs \
lib/evas/canvas/efl_canvas_text.eo.cs \
lib/evas/canvas/efl_canvas_scene3d.eo.cs \
lib/evas/canvas/evas_canvas3d_camera.eo.cs \
lib/evas/canvas/evas_canvas3d_light.eo.cs \
lib/evas/canvas/evas_canvas3d_material.eo.cs \
lib/evas/canvas/evas_canvas3d_mesh.eo.cs \
lib/evas/canvas/evas_canvas3d_node.eo.cs \
lib/evas/canvas/evas_canvas3d_object.eo.cs \
lib/evas/canvas/evas_canvas3d_primitive.eo.cs \
lib/evas/canvas/evas_canvas3d_scene.eo.cs \
lib/evas/canvas/evas_canvas3d_texture.eo.cs \
lib/evas/canvas/efl_vg.eo.cs \
lib/evas/canvas/efl_vg_container.eo.cs \
lib/evas/canvas/efl_vg_gradient.eo.cs \
lib/evas/canvas/efl_vg_gradient_radial.eo.cs \
lib/evas/canvas/efl_vg_gradient_linear.eo.cs \
lib/evas/canvas/efl_vg_root_node.eo.cs \
lib/evas/canvas/efl_vg_shape.eo.cs

efl_eolian_blacklisted_files = \
lib/efl/interfaces/efl_io_buffer.eo.cs \
lib/efl/interfaces/efl_io_closer.eo.cs \
lib/efl/interfaces/efl_io_positioner.eo.cs \
lib/efl/interfaces/efl_io_queue.eo.cs \
lib/efl/interfaces/efl_io_reader.eo.cs \
lib/efl/interfaces/efl_io_sizer.eo.cs \
lib/efl/interfaces/efl_io_writer.eo.cs \
lib/efl/interfaces/efl_text_properties.eo.cs \
lib/efl/interfaces/efl_gfx_buffer.eo.cs \
lib/efl/interfaces/efl_gfx_shape.eo.cs \
lib/efl/interfaces/efl_gfx_gradient.eo.cs \
lib/efl/interfaces/efl_gfx_gradient_linear.eo.cs \
lib/efl/interfaces/efl_gfx_gradient_radial.eo.cs \
lib/efl/interfaces/efl_file.eo.cs

ecore_eolian_blacklisted_files = \
lib/ecore/efl_io_closer_fd.eo.cs \
lib/ecore/efl_io_buffered_stream.eo.cs \
lib/ecore/efl_io_positioner_fd.eo.cs \
lib/ecore/efl_io_reader_fd.eo.cs \
lib/ecore/efl_io_writer_fd.eo.cs \
lib/ecore/efl_io_copier_fd.eo.cs \
lib/ecore/efl_io_sizer_fd.eo.cs \
lib/ecore/efl_io_stdin.eo.cs \
lib/ecore/efl_io_stdout.eo.cs \
lib/ecore/efl_io_stderr.eo.cs \
lib/ecore/efl_io_file.eo.cs \
lib/ecore/efl_io_copier.eo.cs

eo_eolian_blacklisted_files = \
lib/eo/efl_object_override.eo.cs

efl_eolian_mono_files = \
$(filter-out $(eo_eolian_blacklisted_files),$(eo_eolian_files:%.eo=%.eo.cs)) \
$(filter-out $(ecore_eolian_blacklisted_files),$(ecore_eolian_files_public:%.eo=%.eo.cs)) \
$(ecore_eolian_type_files:%.eot=%.eot.cs) \
$(filter-out $(efl_eolian_blacklisted_files),$(efl_eolian_files:%.eo=%.eo.cs)) \
$(efl_eolian_type_files:%.eot=%.eot.cs) \
$(filter-out $(evas_eolian_blacklisted_files),$(evas_eolian_pub_files:%.eo=%.eo.cs)) \
lib/evas/canvas/evas_box.eo.cs \
lib/evas/canvas/evas_image.eo.cs \
lib/evas/canvas/efl_canvas_image.eo.cs \
lib/evas/canvas/evas_table.eo.cs \
lib/evas/canvas/evas_text.eo.cs \
lib/efl/interfaces/efl_text_properties.eo.cs \
$(evas_eolian_type_files:%.eot=%.eot.cs)

### Efl C++
installed_eflmonomainheadersdir = $(includedir)/efl-mono-@VMAJ@/
nodist_installed_eflmonomainheaders_DATA = $(efl_eolian_files:%.eo=%.eo.cs)

CLEANFILES += $(efl_eolian_mono_files)

if HAVE_EOLIAN_MONO
EOLIAN_MONO = @eolian_mono@
_EOLIAN_MONO_DEP = @eolian_mono@
else
EOLIAN_MONO = EFL_RUN_IN_TREE=1 $(top_builddir)/src/bin/eolian_mono/eolian_mono${EXEEXT}
_EOLIAN_MONO_DEP = bin/eolian_mono/eolian_mono${EXEEXT}
endif

AM_V_EOLMONO = $(am__v_EOLMONO_@AM_V@)
am__v_EOLMONO_ = $(am__v_EOLMONO_@AM_DEFAULT_V@)
am__v_EOLMONO_0 = @echo "  EOLMONO  " $@;

if HAVE_MCS

efl_custom_exports_mono_files = \
	lib/efl_mono/efl_custom_exports_mono.c

lib_LTLIBRARIES += \
lib/efl_mono/libeflcustomexportsmono.la

lib_efl_mono_libeflcustomexportsmono_la_SOURCES = \
	$(efl_custom_exports_mono_files)

lib_efl_mono_libeflcustomexportsmono_la_CPPFLAGS = \
-DEFL_BETA_API_SUPPORT \
-I$(top_builddir)/src/lib/efl \
@EINA_CFLAGS@ @EO_CFLAGS@

lib_efl_mono_libeflcustomexportsmono_la_LIBADD = @USE_EINA_LIBS@ @USE_EO_LIBS@
lib_efl_mono_libeflcustomexportsmono_la_DEPENDENCIES = @USE_EINA_INTERNAL_LIBS@ @USE_EO_INTERNAL_LIBS@

bin_PROGRAMS += lib/efl_mono/libefl_mono.dll

efl_eo_mono_files = \
	bindings/mono/eo_mono/object.cs \
	bindings/mono/eo_mono/iwrapper.cs \
	bindings/mono/eo_mono/workaround.cs

efl_eina_mono_files = \
	bindings/mono/eina_mono/eina_config.cs \
	bindings/mono/eina_mono/eina_array.cs \
	bindings/mono/eina_mono/eina_hash.cs \
	bindings/mono/eina_mono/eina_list.cs \
	bindings/mono/eina_mono/eina_inarray.cs \
	bindings/mono/eina_mono/eina_inlist.cs \
	bindings/mono/eina_mono/eina_iterator.cs \
	bindings/mono/eina_mono/eina_container_common.cs \
	bindings/mono/eina_mono/eina_common.cs \
	bindings/mono/eina_mono/eina_log.cs \
	bindings/mono/eina_mono/eina_binbuf.cs \
	bindings/mono/eina_mono/eina_slice.cs \
	bindings/mono/eina_mono/eina_stringshare.cs \
	bindings/mono/eina_mono/eina_error.cs \
	bindings/mono/eina_mono/eina_value.cs

lib_efl_mono_libefl_mono_dll_SOURCES = \
	bindings/mono/efl_mono/efl_all.cs \
	$(efl_eo_mono_files) \
	$(efl_eina_mono_files)

lib/efl_mono/libefl_mono.dll$(EXEEXT): $(lib_efl_mono_libefl_mono_dll_SOURCES) lib/efl_mono/$(am__dirstamp) $(efl_eolian_mono_files)
	@rm -f lib/efl_mono/libefl_mono.dll$(EXEEXT)
	$(AM_V_MCS) $(MCS) $(MCS_FLAGS) -out:$@ -t:library $(filter %.cs, $(^))

if EFL_ENABLE_TESTS

check_LTLIBRARIES += tests/efl_mono/libefl_mono_native_test.la
tests_efl_mono_libefl_mono_native_test_la_CPPFLAGS =  \
-I$(builddir)/tests/efl_mono \
-DTESTS_WD=\"`pwd`\" \
-DTESTS_SRC_DIR=\"$(top_srcdir)/src/tests/efl_mono\" \
-DPACKAGE_BUILD_DIR=\"$(abs_top_builddir)/src/tests/efl_mono\" \
-DPACKAGE_DATA_DIR=\"$(datadir)/efl_js\" \
-DTESTS_BUILD_DIR=\"$(top_builddir)/src/tests/efl_mono\" \
@CHECK_CFLAGS@  @EOLIAN_CFLAGS@ @EINA_CFLAGS@ @EO_CFLAGS@ @ECORE_CFLAGS@ 
tests_efl_mono_libefl_mono_native_test_la_LIBADD = \
@CHECK_LIBS@ @USE_EO_LIBS@ @USE_EINA_LIBS@ @USE_EOLIAN_LIBS@
tests_efl_mono_libefl_mono_native_test_la_LDFLAGS = -rpath $(abs_top_builddir)/tests/efl_mono @EFL_LTLIBRARY_FLAGS@
tests_efl_mono_libefl_mono_native_test_la_DEPENDENCIES = @USE_EINA_INTERNAL_LIBS@ @USE_EO_INTERNAL_LIBS@
tests_efl_mono_libefl_mono_native_test_la_LIBTOOLFLAGS = --tag=disable-static

efl_mono_test_eolian_mono_files = tests/efl_mono/test_testing.eo.cs \
tests/efl_mono/test_numberwrapper.eo.cs

tests/efl_mono/libefl_mono_native_test.c: tests/efl_mono/test_testing.eo.h tests/efl_mono/test_testing.eo.c tests/efl_mono/test_numberwrapper.eo.h tests/efl_mono/test_numberwrapper.eo.c

tests/efl_mono/libefl_mono_test.dll$(EXEEXT): $(efl_mono_test_eolian_mono_files) tests/efl_mono/$(am__dirstamp) lib/efl_mono/libefl_mono.dll tests/efl_mono/libefl_mono_native_test.la
	@rm -f tests/efl_mono/libefl_mono_test.dll$(EXEEXT)
	$(AM_V_MCS) $(MCS) $(MCS_FLAGS) -r:$(abs_builddir)/lib/efl_mono/libefl_mono.dll -out:$@ -t:library $(filter %.cs, $(^))

AM_TESTS_ENVIRONMENT += MONO='mono'; export MONO;
AM_TESTS_ENVIRONMENT += MONO_CONFIG='$(builddir)/tests/efl_mono/efl_mono.exe.config'; export MONO_CONFIG;
AM_TESTS_ENVIRONMENT += MONO_BUILDPATH='$(abs_top_builddir)'; export MONO_BUILDPATH;
AM_TESTS_ENVIRONMENT += MONO_PATH='$(abs_top_builddir)/src/lib/efl_mono:$(LD_LIBRARY_PATH_APPEND)'; export MONO_PATH;
AM_TESTS_ENVIRONMENT += EINA_LOG_LEVEL=8; export EINA_LOG_LEVEL;

check_PROGRAMS += tests/efl_mono/efl_mono.exe
TESTS += tests/efl_mono/mono_test_driver.sh

tests_efl_mono_efl_mono_exe_SOURCES = \
     tests/efl_mono/Main.cs \
     tests/efl_mono/Eina.cs \
     tests/efl_mono/Eo.cs \
     tests/efl_mono/Errors.cs \
     tests/efl_mono/Evas.cs \
     tests/efl_mono/Events.cs \
     tests/efl_mono/FunctionPointers.cs \
     tests/efl_mono/Strings.cs \
     tests/efl_mono/TestUtils.cs \
     tests/efl_mono/Value.cs


tests/efl_mono/efl_mono.exe$(EXEEXT): $(tests_efl_mono_efl_mono_exe_SOURCES) tests/efl_mono/$(am__dirstamp) lib/efl_mono/libefl_mono.dll tests/efl_mono/libefl_mono_test.dll
	@rm -f tests/efl_mono/efl_mono_exe$(EXEEXT)
	$(AM_V_MCS) $(MCS) $(MCS_FLAGS) -r:$(abs_top_builddir)/src/lib/efl_mono/libefl_mono.dll -r:$(abs_top_builddir)/src/tests/efl_mono/libefl_mono_test.dll -out:$@ $(filter %.cs, $(^))

### Examples

lib_LTLIBRARIES += examples/efl_mono/libefl_mono_native_example.la

examples_efl_mono_libefl_mono_native_example_la_SOURCES = examples/efl_mono/libefl_mono_native_example.c
examples_efl_mono_libefl_mono_native_example_la_CPPFLAGS =  \
-I$(builddir)/examples/efl_mono \
-DEXAMPLES_WD=\"`pwd`\" \
-DEXAMPLES_SRC_DIR=\"$(top_srcdir)/src/examples/efl_mono\" \
-DPACKAGE_BUILD_DIR=\"$(abs_top_builddir)/src/examples/efl_mono\" \
-DEXAMPLES_BUILD_DIR=\"$(top_builddir)/src/examples/efl_mono\" \
@EOLIAN_CFLAGS@ @EINA_CFLAGS@ @EO_CFLAGS@ @ECORE_CFLAGS@

examples_efl_mono_libefl_mono_native_example_la_LIBADD = @USE_EO_LIBS@ @USE_EINA_LIBS@ @USE_EOLIAN_LIBS@
examples_efl_mono_libefl_mono_native_example_la_LDFLAGS = @EFL_LTLIBRARY_FLAGS@
examples_efl_mono_libefl_mono_native_example_la_DEPENDENCIES = @USE_EINA_INTERNAL_LIBS@ @USE_EO_INTERNAL_LIBS@
examples_efl_mono_libefl_mono_native_example_la_LIBTOOLFLAGS = --tag=disable-static

efl_mono_example_eolian_mono_files = examples/efl_mono/example_numberwrapper.eo.cs

examples/efl_mono/libefl_mono_native_example.c: examples/efl_mono/example_numberwrapper.eo.h examples/efl_mono/example_numberwrapper.eo.c

examples/efl_mono/libefl_mono_example.dll$(EXEEXT): $(efl_mono_example_eolian_mono_files) examples/efl_mono/$(am__dirstamp) lib/efl_mono/libefl_mono.dll examples/efl_mono/libefl_mono_native_example.la
	@rm -f examples/efl_mono/libefl_mono_example.dll$(EXEEXT)
	$(AM_V_MCS) $(MCS) $(MCS_FLAGS) -r:$(abs_builddir)/lib/efl_mono/libefl_mono.dll -out:$@ -t:library $(filter %.cs, $(^))


bin_PROGRAMS += examples/efl_mono/EinaArray01.exe
examples_efl_mono_EinaArray01_exe_SOURCES = examples/efl_mono/EinaArray01.cs
examples/efl_mono/EinaArray01.exe$(EXEEXT): $(examples_efl_mono_EinaArray01_exe_SOURCES) examples/efl_mono/$(am__dirstamp) lib/efl_mono/libefl_mono.dll examples/efl_mono/libefl_mono_example.dll
	@rm -f examples/efl_mono/EinaArray01_exe$(EXEEXT)
	$(AM_V_MCS) $(MCS) $(MCS_FLAGS) -r:$(abs_top_builddir)/src/lib/efl_mono/libefl_mono.dll -r:$(abs_top_builddir)/src/examples/efl_mono/libefl_mono_example.dll -out:$@ $(filter %.cs, $(^))

bin_PROGRAMS += examples/efl_mono/EinaBinbuf01.exe
examples_efl_mono_EinaBinbuf01_exe_SOURCES = examples/efl_mono/EinaBinbuf01.cs
examples/efl_mono/EinaBinbuf01.exe$(EXEEXT): $(examples_efl_mono_EinaBinbuf01_exe_SOURCES) examples/efl_mono/$(am__dirstamp) lib/efl_mono/libefl_mono.dll examples/efl_mono/libefl_mono_example.dll
	@rm -f examples/efl_mono/EinaBinbuf01_exe$(EXEEXT)
	$(AM_V_MCS) $(MCS) $(MCS_FLAGS) -r:$(abs_top_builddir)/src/lib/efl_mono/libefl_mono.dll -r:$(abs_top_builddir)/src/examples/efl_mono/libefl_mono_example.dll -out:$@ $(filter %.cs, $(^))

bin_PROGRAMS += examples/efl_mono/EinaError01.exe
examples_efl_mono_EinaError01_exe_SOURCES = examples/efl_mono/EinaError01.cs
examples/efl_mono/EinaError01.exe$(EXEEXT): $(examples_efl_mono_EinaError01_exe_SOURCES) examples/efl_mono/$(am__dirstamp) lib/efl_mono/libefl_mono.dll examples/efl_mono/libefl_mono_example.dll
	@rm -f examples/efl_mono/EinaError01_exe$(EXEEXT)
	$(AM_V_MCS) $(MCS) $(MCS_FLAGS) -r:$(abs_top_builddir)/src/lib/efl_mono/libefl_mono.dll -r:$(abs_top_builddir)/src/examples/efl_mono/libefl_mono_example.dll -out:$@ $(filter %.cs, $(^))

bin_PROGRAMS += examples/efl_mono/EinaHash01.exe
examples_efl_mono_EinaHash01_exe_SOURCES = examples/efl_mono/EinaHash01.cs
examples/efl_mono/EinaHash01.exe$(EXEEXT): $(examples_efl_mono_EinaHash01_exe_SOURCES) examples/efl_mono/$(am__dirstamp) lib/efl_mono/libefl_mono.dll examples/efl_mono/libefl_mono_example.dll
	@rm -f examples/efl_mono/EinaHash01_exe$(EXEEXT)
	$(AM_V_MCS) $(MCS) $(MCS_FLAGS) -r:$(abs_top_builddir)/src/lib/efl_mono/libefl_mono.dll -r:$(abs_top_builddir)/src/examples/efl_mono/libefl_mono_example.dll -out:$@ $(filter %.cs, $(^))

bin_PROGRAMS += examples/efl_mono/EoInherit01.exe
examples_efl_mono_EoInherit01_exe_SOURCES = examples/efl_mono/EoInherit01.cs
examples/efl_mono/EoInherit01.exe$(EXEEXT): $(examples_efl_mono_EoInherit01_exe_SOURCES) examples/efl_mono/$(am__dirstamp) lib/efl_mono/libefl_mono.dll examples/efl_mono/libefl_mono_example.dll
	@rm -f examples/efl_mono/EoInherit01_exe$(EXEEXT)
	$(AM_V_MCS) $(MCS) $(MCS_FLAGS) -r:$(abs_top_builddir)/src/lib/efl_mono/libefl_mono.dll -r:$(abs_top_builddir)/src/examples/efl_mono/libefl_mono_example.dll -out:$@ $(filter %.cs, $(^))

bin_PROGRAMS += examples/efl_mono/FunctionPointer01.exe
examples_efl_mono_FunctionPointer01_exe_SOURCES = examples/efl_mono/FunctionPointer01.cs
examples/efl_mono/FunctionPointer01.exe$(EXEEXT): $(examples_efl_mono_FunctionPointer01_exe_SOURCES) examples/efl_mono/$(am__dirstamp) lib/efl_mono/libefl_mono.dll examples/efl_mono/libefl_mono_example.dll
	@rm -f examples/efl_mono/FunctionPointer01_exe$(EXEEXT)
	$(AM_V_MCS) $(MCS) $(MCS_FLAGS) -r:$(abs_top_builddir)/src/lib/efl_mono/libefl_mono.dll -r:$(abs_top_builddir)/src/examples/efl_mono/libefl_mono_example.dll -out:$@ $(filter %.cs, $(^))


SUFFIXES += .eo.cs

lib/eo/%.eo.cs: lib/eo/%.eo $(_EOLIAN_MONO_DEP)
	$(AM_V_EOLMONO) \
	$(MKDIR_P) $(dir $@); \
	$(EOLIAN_MONO) $(EOLIAN_FLAGS) --dllimport eo -o $@ $<

lib/ecore/%.eo.cs: lib/ecore/%.eo $(_EOLIAN_MONO_DEP)
	$(AM_V_EOLMONO) \
	$(MKDIR_P) $(dir $@); \
	$(EOLIAN_MONO) $(EOLIAN_FLAGS) --dllimport ecore -o $@ $<

lib/evas/%.eo.cs: lib/evas/%.eo $(_EOLIAN_MONO_DEP)
	$(AM_V_EOLMONO) \
	$(MKDIR_P) $(dir $@); \
	$(EOLIAN_MONO) $(EOLIAN_FLAGS) --dllimport evas -o $@ $<

lib/efl/%.eo.cs: lib/efl/%.eo $(_EOLIAN_MONO_DEP)
	$(AM_V_EOLMONO) \
	$(MKDIR_P) $(dir $@); \
	$(EOLIAN_MONO) $(EOLIAN_FLAGS) --dllimport efl -o $@ $<

lib/ecore/%.eot.cs: lib/ecore/%.eot $(_EOLIAN_MONO_DEP)
	$(AM_V_EOLMONO) \
	$(MKDIR_P) $(dir $@); \
	$(EOLIAN_MONO) $(EOLIAN_FLAGS) --dllimport ecore -o $@ $<

lib/evas/%.eot.cs: lib/evas/%.eot $(_EOLIAN_MONO_DEP)
	$(AM_V_EOLMONO) \
	$(MKDIR_P) $(dir $@); \
	$(EOLIAN_MONO) $(EOLIAN_FLAGS) --dllimport evas -o $@ $<

lib/efl/%.eot.cs: lib/efl/%.eot $(_EOLIAN_MONO_DEP)
	$(AM_V_EOLMONO) \
	$(MKDIR_P) $(dir $@); \
	$(EOLIAN_MONO) $(EOLIAN_FLAGS) --dllimport efl -o $@ $<

tests/efl_mono/%.eo.cs: tests/efl_mono/%.eo $(_EOLIAN_MONO_DEP)
	$(AM_V_EOLMONO) \
	$(MKDIR_P) $(dir $@); \
	$(EOLIAN_MONO) $(EOLIAN_FLAGS) --dllimport efl_mono_native_test -o $@ $<

examples/efl_mono/%.eo.cs: examples/efl_mono/%.eo $(_EOLIAN_MONO_DEP)
	$(AM_V_EOLMONO) \
	$(MKDIR_P) $(dir $@); \
	$(EOLIAN_MONO) $(EOLIAN_FLAGS) --dllimport efl_mono_native_example -o $@ $<

endif
endif
